@use  '../../../../styleSheet/_Variables' as *
@use  '../../../../styleSheet/_mixin' as *
@use  '../../../../styleSheet/_breakpoints' as *
@use  '../../../../styleSheet/_typography' as *

.header
  width: 100%
  background: $black-50
  color: $white
  padding: 3.2rem 2.4rem
  border-bottom: 1px solid $gray
  position: relative

  .header-container
    @include flex-container(row, center, space-between)
    width: 100%
    height: 100%

    .header-btn
      background: none
      border: none
      outline: none
      color: $white
      cursor: pointer
      position: relative
      z-index: 1001

    .menu-toggle
      .close-icon
        display: block

      .hidden
        display: none

    .navigation
      display: none

      // Mobile menu styles
      &.mobile-menu-open
        display: block
        position: absolute
        top: 100%
        left: 0
        right: 0
        background: $white
        z-index: 1000
        padding: 3.2rem 2.4rem
        border-radius: 0 0 0.8rem 0.8rem
        box-shadow: 0 0.4rem 1.6rem rgba(0, 0, 0, 0.1)

        .nav-list
          @include flex-container(column, flex-start, flex-start, nowrap, 2.4rem)

          li
            list-style: none
            cursor: pointer
            width: 100%

            .nav-link
              text-decoration: none
              color: $black
              font-size: 1.8rem
              font-weight: 700
              letter-spacing: 1.3px
              transition: color 0.2s ease
              display: block

              &:hover, &.active
                color: $primary-orange

            .profile-toggle
              background: none
              border: none
              outline: none
              color: $black
              cursor: pointer
              text-decoration: none
              font-size: 1.8rem
              font-weight: 700
              letter-spacing: 1.3px
              font-family: inherit
              display: block
              width: 100%
              text-align: left

              &:hover
                color: $primary-orange

    // Cart button styles (mobile first)
    .cart-button
      position: relative

      .cart-icon-container
        position: relative
        display: inline-block

        .cart-count-badge
          position: absolute
          top: -0.6rem
          right: -0.6rem
          background: $primary-orange
          color: $white
          border-radius: 50%
          min-width: 1.8rem
          height: 1.8rem
          @include flex-container(row, center, center)
          font-size: 1rem
          font-weight: 700
          line-height: 1
          z-index: 10
          border: 1px solid $black-50
          padding: 0 0.2rem
          box-sizing: border-box

  // Mobile overlay
  .mobile-overlay
    position: fixed
    top: 0
    left: 0
    right: 0
    bottom: 0
    background: rgba(0, 0, 0, 0.4)
    z-index: 999
    backdrop-filter: blur(2px)


@include mq(tablet)
  .header
    padding: 3.2rem 4rem

    .navigation
      &.mobile-menu-open
        padding: 3.2rem 4rem

    // Tablet cart badge adjustments
    .cart-button
      .cart-icon-container
        .cart-count-badge
          top: -0.7rem
          right: -0.7rem
          min-width: 1.9rem
          height: 1.9rem
          font-size: 1.1rem
          border: 1.5px solid $black-50

@include mq('desktop')
  .header
    padding: 3.2rem 16.5rem

    .header-container
      .menu-toggle
        display: none

      .navigation
        display: block
        position: static
        background: transparent
        padding: 0
        border-radius: 0
        box-shadow: none

        // Ensure desktop navigation overrides mobile styles
        &.mobile-menu-open,
        &:not(.mobile-menu-open)
          display: block
          position: static
          background: transparent
          padding: 0
          border-radius: 0
          box-shadow: none

        .nav-list
          @include flex-container(row, center, space-between, nowrap, 3.4rem)

          li
            list-style: none
            cursor: pointer
            width: auto

            .nav-link
              text-decoration: none
              color: $white
              font-size: inherit
              font-weight: inherit
              letter-spacing: inherit
              padding: 0
              display: inline

              &:hover, &.active
                color: $primary-orange

            // Profile dropdown styles
            .profile-dropdown
              position: relative
              display: inline-block

              .profile-toggle
                background: none
                border: none
                outline: none
                color: $white
                cursor: pointer
                text-decoration: none
                font-size: inherit
                font-weight: inherit
                font-family: inherit
                padding: 0
                display: inline
                width: auto
                text-align: inherit
                letter-spacing: inherit

                &:hover
                  color: $primary-orange

              .dropdown-menu
                position: absolute
                top: 100%
                right: 0
                background: $white
                border-radius: 0.8rem
                box-shadow: 0 0.4rem 1.6rem rgba(0, 0, 0, 0.1)
                min-width: 20rem
                padding: 1.6rem 0
                z-index: 1000
                margin-top: 0.8rem

                .user-info
                  padding: 0 1.6rem 1.2rem
                  @include flex-container(column, flex-start, flex-start, nowrap, 0.4rem)

                  .user-name
                    font-size: 1.4rem
                    font-weight: 600
                    color: $black

                  .user-email
                    font-size: 1.2rem
                    color: $dark-grey

                .dropdown-divider
                  margin: 0.8rem 0
                  border: none
                  height: 0.1rem
                  background: $light-grey

                .dropdown-item
                  width: 100%
                  padding: 0.8rem 1.6rem
                  background: none
                  border: none
                  text-align: left
                  cursor: pointer
                  font-size: 1.4rem
                  color: $black
                  transition: background-color 0.2s ease

                  &:hover
                    background: $primary-peach

    // Hide mobile overlay on desktop
    .mobile-overlay
      display: none



    .header-btn
      font-size: 1.6rem
      font-weight: 500

    // Desktop cart badge styles
    .cart-button
      .cart-icon-container
        .cart-count-badge
          top: -0.8rem
          right: -0.8rem
          min-width: 2rem
          height: 2rem
          font-size: 1.2rem
          border: 2px solid $black-50
          padding: 0 0.3rem

  // Animation and transition styles
  .navigation
    transition: all 0.3s ease-in-out

    &.mobile-menu-open
      animation: slideDown 0.3s ease-out

  .mobile-overlay
    animation: fadeIn 0.3s ease-out

// Keyframe animations
@keyframes slideDown
  from
    opacity: 0
    transform: translateY(-1rem)
  to
    opacity: 1
    transform: translateY(0)

@keyframes fadeIn
  from
    opacity: 0
  to
    opacity: 1

// Small mobile adjustments (below 375px)
@media (max-width: 23.4375em)
  .header
    .cart-button
      .cart-icon-container
        .cart-count-badge
          top: -0.5rem
          right: -0.5rem
          min-width: 1.6rem
          height: 1.6rem
          font-size: 0.9rem
          border: 1px solid $black-50
